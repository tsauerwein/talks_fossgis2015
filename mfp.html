<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>MapFish Print 3</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="bower_components/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="theme/c2c.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="bower_components/reveal.js/lib/css/zenburn.css">

    <!--[if lt IE 9]>
    <script src="bower_components/reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->
    <style>
      .reveal h1.beefy {
        font-weight: bold;
        text-transform: uppercase;
        text-shadow: 10px 10px 6px rgba(0, 0, 0, 0.2);
      }
      .reveal ul.plain {
        list-style-type: none;
      }
      .reveal h2 {
        margin-bottom: 40px;
      }
      .reveal h3 {
        margin-bottom: 30px;
      }
      .reveal h2 > img {
        vertical-align: sub;
      }
      .text-align-left {
        text-align: left;
      }
      .ex-link {
        font-size: smaller;
      }
      .underline {
        text-decoration: underline;
      }
      #logos > div {
        padding: 0 10px;
        display: inline-block;
        text-align: center;
        vertical-align: middle;
      }
      #logos > div img {
        margin: 0;
        vertical-align: text-bottom;
      }
      pre.narrow {
        width: 50%;
      }
      #ol2-to-ol3 > img {
        vertical-align: middle;
      }

    </style>

    <script>
        if (window.location.search.match( /print-pdf/gi ) ) {
          var link = document.createElement( 'link' );
          link.rel = 'stylesheet';
          link.type = 'text/css';
          link.href = 'bower_components/reveal.js/css/print/pdf.css';
          document.getElementsByTagName( 'head' )[0].appendChild( link );
        }
    </script>

  </head>
  <body>

    <div class="reveal">
      <div class="slides">
        <section>
          <h1 class="beefy">MapFish Print 3</h1>
          <h2 style="font-style: italic;">Printing maps like a boss</h2>
          <img src="img/logo_mapfish.png" style="opacity: 0.5;">
          <!--
          -->
          <p>Tobias Sauerwein</p>
          <p>Camptocamp</p>
        </section>
        <section>
          <h2>Introduction</h2>
          <!--
          - And a bit of history
          -->
          <div id="ol2-to-ol3">
            <img src="img/ol2.png"><span>&nbsp;&#8680;</span><img src="img/ol3-logo.png">
          </div>
          <ul>
            <li>New version of OL</li>
            <li>Version 2's been around since 2006</li>
            <li>Development began in 2013</li>
            <li>Complete rewrite!</li>
            <li>v3.0 released August, 2014</li>
            <!--
            - OL3 is rather new
            - v3.1 was released one month ago
            - v3.2 will be released next week
            - monthly releases
            -->
          </ul>
        </section>
        <section>
          <h2>Goals</h2>
          <ul>
            <li>Feature-complete library</li>
            <!--
            - Support for many data providers
            - Support for many data formats
            - OGC support
            - Just like OL2 in that sense
            -->
            <li>More consistent API</li>
            <!--
            - Simpler
            - More consistent
            -->
            <li>Smaller builds</li>
            <!--
            - Closure Compiler
            -->
            <li>Push the limits of vector rendering</li>
            <!--
            - Support for complex styling
            - Be able to draw many features
            - Many more than OL2
            -->
            <li>Use Computer Graphics technologies (WebGL & Canvas)</li>
            <!--
            - Performance (GPU)
            - Flexibility (pixel detection)
            - Open the doors to 3D
            -->
          </ul>
        </section>
        <section>
          <h2>« Maps as Graphics »</h2>
          <img class="framed" src="img/teapot-map.jpg" alt="Teapot map">
          <!-- Notes:
          - Rely on the Canvas and WebGL Graphics APIs
          - Performance (GPU)
          - Flexibility
          - 3D
          -->
        </section>
        <section>
          <h2>Positionning</h2>
          <br>
          <div id="logos">
            <div class="fragment" data-fragment-index="0">
              <img src="img/ol2-logo.png"> OpenLayers 2
              <br><br>
              <img src="img/leaflet-logo.png">
            </div>
            <div class="fragment" data-fragment-index="2">
              <img src="img/ol3-logo.png">
              <br>
              OpenLayers 3
            </div>
            <div class="fragment" data-fragment-index="1">
              <img src="img/cesium-logo.png">
              <br><br>
              <img src="img/owg-logo.png">
            </div>
          </div>
          <br>
          <p class="fragment">An ambitious library for ambitious maps!</p>
          <!-- Notes:
          - Leaflet:
            - Nice API, easy to work with
            - Lightweight, works great on mobile
          - Cesium:
            - Fantastic virtual globe solution
          - OL3
            - Compared to Leaflet:
              - Support for many layer types, formats, etc
              - Support for irregular tile grids
              - Support for local projections
              - Support for arbitrary resolutions
              - Support for advanced drawing tools
              - Built-in functionality, as opposed to 3d-party plugins
            - Compared to OL2:
              - Better and more consistent APIs
              - Smaller builds
              - Better performance
              - Flexible architecture
            - Compared to Cesium:
              - Smaller and more compact than Cesium
              - Easier to use
              - WebGL not required
              - Better mobile support
            - Focus on performance
              - WebGL
              - GPU acceleration
              - requestAnimationFrame
              - Closure Compiler
          -->
        </section>
        <section>
          <h2>Features</h2>
          <!--
          - Some of the features natively provided by OL3, that other
            libraries don't support.
          -->
          <ul>
            <li>Map rotations</li>
            <!--
            - Useful when building navigation systems
            -->
            <li>Animations</li>
            <!--
            - OL3 provides an animation framework that can be used
              to animate the map in different ways
            -->
            <li>Local/custom projections</li>
            <!--
            - Local projection for your area
            -->
            <li>Arbitrary tile grids (WMTS)</li>
            <!--
            - Not only OSM-like tile grids
            -->
            <li>Various data providers and formats<br/>(OSM, BingMaps, WMS, GeoJSON, KML…)</li>
            <!--
            - OSM, MapQuest, BingMaps
            - WMS, WMTS
            - We do not support Google Maps because Google do not
              allow direct access to their tiles
            -->
            <li>Image effect/pixel manipulation</li>
            <li>« Complex vector »</li>
            <li class="fragment">…</li>
          </ul>
        </section>
        <section>
          <a href="./examples/rotation.html">Example #1</a> (Rotation, Animation, Vector)
          <!--
          - Introduce map: canvas renderer, MapQuest layer, vector layer, labels
            markers, boundaries of countries
          - Rotation: labels and markers do not rotate with the map
          - Animation: fly-to animation (combination of pan + zoom animations), no
            streching of labels, markers and lines during animations
          -->
        </section>
        <section>
          <h2>« Draw early, Draw often »</h2>
          <img src="img/mona320x360_html5.jpg">
          <!--
          - We need to re-render the map very ofter to get good rendering
            quality at any time (even during animations)
          -->
        </section>
        <section>
          <h3>For good rendering quality:</h3>
          <ul>
            <li><span class="underline">Vectors</span> redrawn at each animation frame</li>
            <li>While interacting and animating</li>
            <li>(Hopefully) At 60 fps!</li>
          </ul>
        </section>
        <section>
          <h2>Performance challenge!</h2>
          <p class="fragment">Let's look at the techniques used…</p>
        </section>
        <section>
          <h2>#1 Batching</h2>
          <div>
            <p>Minimize data processing and manipulation:</p>
            <ul>
              <li>Style calculations</li>
              <li>Geometry simplifications</li>
              <li>R-tree lookups</li>
              <li>Object creations (less pressure on GC)</li>
            </ul>
            <br>
            <br>
            <p>&#8680; Replay batch during animations/interactions</p>
          </div>
        </section>
        <section>
          <h2>#2 Geometry Simplification</h2>
          <div>
            <ul>
              <li>Douglas Peuker for lines</li>
              <li>Quantization for polygons (to maintain topology)</li>
            </ul>
            <br>
            <br>
            <p>(Also allows for better rendering quality.)</p>
          </div>
        </section>
        <section>
          <h2>#3 Over-simplification</h2>
          <p>Over-simplification and clipping for the parts that are outside the viewport.</p>
          <img src="img/over-simplification.png">
        </section>
        <section>
          <a href="./examples/fractal.html">Example #2</a> (Complex and large features)
        </section>
        <section>
          <h2>Hit Detection</h2>
          <!--
          - Capability to detect features at a given pixel
          -->
          <p>Principle: redraw a subset of the scene in a small and off-screen
          canvas, and test if there's a color.</p>
          <!--
          - Features under others are detectable
          - Pixel-perfect detection
          - Tolerance for line detection on touch devices
          -->
        </section>
        <section>
          <a href="./examples/hitdetection.html">Example #3</a> (Hit Detection)
        </section>
        <section>
          <h3>Hit Detection for raster layers coming soon…</h3>
        </section>
        <section>
          <h2>Roadmap</h2>
          <ul>
            <li>Draw lines, polygons and text with WebGL</li>
            <li>Support tilted/perspective views</li>
            <li>Finish online build tool</li>
            <li>Improve our CommonJS/distribution story</li>
            <li>Improve the documentation</li>
            <li>Continue with the Cesium integration (ol3-cesium)</li>
          </ul>
          <br>
          <br>
          <p>&#8680; Code sprint in April…</p>
        </section>
        <section>
          <h3>Tilted view prototype</h3>
          <a href="./examples/tilt.html">Example #4</a> (Tilt)
        </section>
        <section>
          <h2>Thanks!</h2>
        </section>
      </div>
    </div>

    <!-- reveal.js loading and configuration -->
    <script src="bower_components/reveal.js/lib/js/head.min.js"></script>
    <script src="bower_components/reveal.js/js/reveal.js"></script>
    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        rollingLinks: false,
        transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none,

        // Optional libraries used to extend on reveal.js
        dependencies: [{
          src: 'bower_components/reveal.js/lib/js/classList.js',
          condition: function() {
            return !document.body.classList;
          }
        }, {
          src: 'bower_components/reveal.js/plugin/highlight/highlight.js',
          async: true,
          callback: function() {
            hljs.initHighlightingOnLoad();
          }
        }]
      });

    </script>
  </body>
</html>
